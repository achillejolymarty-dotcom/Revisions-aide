<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>EasyStudy</title>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
    }
    .container {
      max-width: 1000px;
      margin: auto;
      padding: 40px;
    }
    input, textarea, button {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      border-radius: 6px;
      border: none;
      font-size: 15px;
    }
    button {
      background: #6366f1;
      color: white;
      cursor: pointer;
    }
    .card {
      background: #020617;
      padding: 25px;
      border-radius: 8px;
      margin-bottom: 30px;
    }
    .tabs button {
      width: auto;
      margin-right: 10px;
    }
    #app { display: none; }
    #result, #chatBox {
      white-space: pre-wrap;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  
  <!-- APP -->
  <div id="app" style="display:block">


    <div class="tabs">
      <button onclick="show('revision')">Fiche de r√©vision</button>
      <button onclick="show('chat')">Prof IA</button>
      <button onclick="logout()">D√©connexion</button>
    </div>

    <!-- FICHE -->
    <div id="revision" class="card">
      <h2>G√©n√©rer une fiche de r√©vision</h2>
      <textarea id="course" placeholder="Colle ton cours ici"></textarea>
      <button onclick="generateRevision()">G√©n√©rer</button>
      <div id="result"></div>
    </div>

    <!-- CHAT -->
    <div id="chat" class="card" style="display:none">
      <h2>Discuter avec le prof IA</h2>
      <textarea id="question" placeholder="Pose ta question"></textarea>
      <button onclick="askProf()">Envoyer</button>
      <div id="chatBox"></div>
    </div>

  </div>

</div>

<script>
  // üîê SUPABASE (√Ä REMPLACER)
  const supabase = supabase.createClient(
    "https://TON-PROJET.supabase.co",
    "PUBLIC_ANON_KEY"
  );

  async function register() {
    const { error } = await supabase.auth.signUp({
      email: email.value,
      password: password.value
    });
    authMsg.innerText = error ? error.message : "Compte cr√©√©. Connecte-toi.";
  }

  async function login() {
    const { error } = await supabase.auth.signInWithPassword({
      email: email.value,
      password: password.value
    });
    if (error) authMsg.innerText = error.message;
  }

  async function logout() {
    await supabase.auth.signOut();
    location.reload();
  }

  supabase.auth.onAuthStateChange((_, session) => {
    if (session) {
      auth.style.display = "none";
      app.style.display = "block";
    }
  });

  function show(id) {
    revision.style.display = "none";
    chat.style.display = "none";
    document.getElementById(id).style.display = "block";
  }

  function generateRevision() {
    result.innerText = "G√©n√©ration IA en cours‚Ä¶ (Make √† brancher)";
  }

  function askProf() {
    chatBox.innerText = "R√©ponse du prof IA‚Ä¶ (Make √† brancher)";
  }
</script>

</body>
</html>
